

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Values &amp; Objects &mdash; Riak Python Client 2.7.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Riak Python Client 2.7.0 documentation" href="index.html"/>
        <link rel="next" title="Data Types" href="datatypes.html"/>
        <link rel="prev" title="Buckets &amp; Bucket Types" href="bucket.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Riak Python Client
          

          
          </a>

          
            
            
              <div class="version">
                2.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="client.html">Client &amp; Connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="bucket.html">Buckets &amp; Bucket Types</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Values &amp; Objects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#riakobject">RiakObject</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vector-clock">Vector clock</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#persistence">Persistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="#value-and-metadata">Value and Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#siblings">Siblings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conflicts-and-resolvers">Conflicts and Resolvers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="datatypes.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="query.html">Query Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Usage &amp; Internals</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Riak Python Client</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Values &amp; Objects</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/object.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="values-objects">
<h1>Values &amp; Objects<a class="headerlink" href="#values-objects" title="Permalink to this headline">¶</a></h1>
<p>Keys in Riak are namespaced into <code class="xref py py-class docutils literal"><span class="pre">buckets</span></code>, and their associated values are represented
by <code class="xref py py-class docutils literal"><span class="pre">objects</span></code>, not to be confused with Python
&#8220;objects&#8221;. A <code class="xref py py-class docutils literal"><span class="pre">RiakObject</span></code> is a container for the key, the
<a class="reference internal" href="#vclock"><span class="std std-ref">Vector clock</span></a>, the value(s) and any metadata associated with the
value(s).</p>
<p>Values may also be <code class="xref py py-class docutils literal"><span class="pre">datatypes</span></code>, but
are not discussed here.</p>
<div class="section" id="riakobject">
<h2>RiakObject<a class="headerlink" href="#riakobject" title="Permalink to this headline">¶</a></h2>
<div class="section" id="vector-clock">
<span id="vclock"></span><h3>Vector clock<a class="headerlink" href="#vector-clock" title="Permalink to this headline">¶</a></h3>
<p>Vector clocks are Riak&#8217;s means of tracking the relationships between
writes to a key. It is best practice to fetch the latest version of a
key before attempting to modify or overwrite the value; if you do not,
you may create <a class="reference internal" href="#siblings"><span class="std std-ref">Siblings</span></a> or lose data! The content of a vector
clock is essentially opaque to the user.</p>
</div>
</div>
<div class="section" id="persistence">
<h2>Persistence<a class="headerlink" href="#persistence" title="Permalink to this headline">¶</a></h2>
<p>Fetching, storing, and deleting keys are the bread-and-butter of Riak.</p>
</div>
<div class="section" id="value-and-metadata">
<span id="object-accessors"></span><h2>Value and Metadata<a class="headerlink" href="#value-and-metadata" title="Permalink to this headline">¶</a></h2>
<p>Unless you have enabled <a class="reference internal" href="#siblings"><span class="std std-ref">Siblings</span></a> via the <code class="xref py py-attr docutils literal"><span class="pre">allow_mult</span></code> bucket property, you can
inspect and manipulate the value and metadata of an object directly using these
properties and methods:</p>
</div>
<div class="section" id="siblings">
<span id="id1"></span><h2>Siblings<a class="headerlink" href="#siblings" title="Permalink to this headline">¶</a></h2>
<p>Because Riak&#8217;s consistency model is &#8220;eventual&#8221; (and not linearizable),
there is no way for it to disambiguate writes that happen
concurrently. The <a class="reference internal" href="#vclock"><span class="std std-ref">Vector clock</span></a> helps establish a
&#8220;happens after&#8221; relationships so that concurrent writes can be
detected, but with the exception of <a class="reference internal" href="datatypes.html#datatypes"><span class="std std-ref">Data Types</span></a>, Riak has no way
to determine which write has the correct value.</p>
<p>Instead, when <code class="xref py py-attr docutils literal"><span class="pre">allow_mult</span></code>
is <code class="docutils literal"><span class="pre">True</span></code>, Riak keeps all writes that appear to be concurrent. Thus,
the contents of a key&#8217;s value may, in fact, be multiple values, which
are called &#8220;siblings&#8221;. Siblings are modeled in <code class="xref py py-class docutils literal"><span class="pre">RiakContent</span></code> objects, which contain all of the same
<a class="reference internal" href="#object-accessors"><span class="std std-ref">Value and Metadata</span></a> methods and attributes as the parent object.</p>
<p>You do not typically have to create <code class="xref py py-class docutils literal"><span class="pre">RiakContent</span></code> objects yourself, but they will be created
for you when <code class="xref py py-meth docutils literal"><span class="pre">fetching</span></code> objects from Riak.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="#object-accessors"><span class="std std-ref">Value and Metadata</span></a> accessors on <code class="xref py py-class docutils literal"><span class="pre">RiakObject</span></code>
are actually proxied to the first sibling when the object has only
one.</p>
</div>
<div class="section" id="conflicts-and-resolvers">
<h3>Conflicts and Resolvers<a class="headerlink" href="#conflicts-and-resolvers" title="Permalink to this headline">¶</a></h3>
<p>When an object is <em>not</em> in conflict, it has only one sibling. When it
is in conflict, you will have to resolve the conflict before it can be
written again. How you choose to resolve the conflict is up to you,
but you can automate the process using a <code class="xref py py-attr docutils literal"><span class="pre">resolver</span></code> function.</p>
<p>If you do not supply a resolver function, or your resolver leaves
multiple siblings present, accessing the <a class="reference internal" href="#object-accessors"><span class="std std-ref">Value and Metadata</span></a> will
result in a <code class="xref py py-exc docutils literal"><span class="pre">ConflictError</span></code> being raised.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="datatypes.html" class="btn btn-neutral float-right" title="Data Types" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="bucket.html" class="btn btn-neutral" title="Buckets &amp; Bucket Types" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2014, Basho Technologies.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.7.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>