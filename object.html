<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Values &amp; Objects &mdash; Riak Python Client 2.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-2.3.2/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/2.3.2/cerulean/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-2.3.2/css/bootstrap-responsive.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Riak Python Client 2.0.0 documentation" href="index.html" />
    <link rel="next" title="Query Methods" href="query.html" />
    <link rel="prev" title="Buckets" href="bucket.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="index.html">Riak Python Client</a>
        <span class="navbar-text pull-left"><b>2.0.0</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown globaltoc-container">
  <a href="index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Docs <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="client.html">Client &amp; Connections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="client.html#client-objects">Client objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="client.html#client-level-operations">Client-level Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="client.html#accessing-buckets">Accessing Buckets</a></li>
<li class="toctree-l2"><a class="reference internal" href="client.html#bucket-level-operations">Bucket-level Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="client.html#key-level-operations">Key-level Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="client.html#query-operations">Query Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="client.html#serialization">Serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="client.html#deprecated-methods">Deprecated Methods</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bucket.html">Buckets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="bucket.html#bucket-objects">Bucket objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="bucket.html#bucket-properties">Bucket properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="bucket.html#working-with-keys">Working with keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="bucket.html#query-operations">Query operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="bucket.html#serialization">Serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="bucket.html#listing-keys">Listing keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="bucket.html#deprecated-methods">Deprecated methods</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Values &amp; Objects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#riakobject">RiakObject</a></li>
<li class="toctree-l2"><a class="reference internal" href="#persistence">Persistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="#value-and-metadata">Value and Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#siblings">Siblings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="query.html">Query Methods</a><ul>
<li class="toctree-l2"><a class="reference internal" href="query.html#secondary-indexes">Secondary Indexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html#fulltext-search">Fulltext Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html#mapreduce">MapReduce</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Usage &amp; Internals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#connection-pool">Connection pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#retry-logic">Retry logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#multiget">Multiget</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#transports">Transports</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#utilities">Utilities</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Values &amp; Objects</a><ul>
<li><a class="reference internal" href="#riakobject">RiakObject</a><ul>
<li><a class="reference internal" href="#vector-clock">Vector clock</a></li>
</ul>
</li>
<li><a class="reference internal" href="#persistence">Persistence</a></li>
<li><a class="reference internal" href="#value-and-metadata">Value and Metadata</a></li>
<li><a class="reference internal" href="#siblings">Siblings</a><ul>
<li><a class="reference internal" href="#conflicts-and-resolvers">Conflicts and Resolvers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
            
          </ul>

          
            
<form class="navbar-search pull-right" action="search.html" method="get">
  <input type="text" name="q" class="search-query" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
  <ul class="pager">
    <li class="previous">
      <a href="bucket.html" 
         title="previous chapter">&larr;Buckets</a></li>
    <li class="next">
      <a href="query.html" 
         title="next chapter">Query Methods&rarr;</a></li>
  </ul>
  
  <div class="section" id="values-objects">
<h1>Values &amp; Objects<a class="headerlink" href="#values-objects" title="Permalink to this headline">¶</a></h1>
<p>Keys in Riak are namespaced into <a class="reference internal" href="bucket.html#riak.bucket.RiakBucket" title="riak.bucket.RiakBucket"><tt class="xref py py-class docutils literal"><span class="pre">buckets</span></tt></a>, and their associated values are represented
by <a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">objects</span></tt></a>, not to be confused with Python
&#8220;objects&#8221;. A <a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a> is a container for the key, the
<a class="reference internal" href="#vclock"><em>Vector clock</em></a>, the value(s) and any metadata associated with the
value(s).</p>
<div class="section" id="riakobject">
<h2>RiakObject<a class="headerlink" href="#riakobject" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="riak.riak_object.RiakObject">
<em class="property">class </em><tt class="descclassname">riak.riak_object.</tt><tt class="descname">RiakObject</tt><big>(</big><em>client</em>, <em>bucket</em>, <em>key=None</em><big>)</big><a class="headerlink" href="#riak.riak_object.RiakObject" title="Permalink to this definition">¶</a></dt>
<dd><p>The RiakObject holds meta information about a Riak object, plus the
object&#8217;s data.</p>
<p>Construct a new RiakObject.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>client</strong> (<a class="reference internal" href="client.html#riak.client.RiakClient" title="riak.client.RiakClient"><tt class="xref py py-class docutils literal"><span class="pre">RiakClient</span></tt></a>) &#8211; A RiakClient object.</li>
<li><strong>bucket</strong> (<a class="reference internal" href="bucket.html#riak.bucket.RiakBucket" title="riak.bucket.RiakBucket"><tt class="xref py py-class docutils literal"><span class="pre">RiakBucket</span></tt></a>) &#8211; A RiakBucket object.</li>
<li><strong>key</strong> (<em>string</em>) &#8211; An optional key. If not specified, then the key
is generated by the server when <a class="reference internal" href="#riak.riak_object.RiakObject.store" title="riak.riak_object.RiakObject.store"><tt class="xref py py-func docutils literal"><span class="pre">store()</span></tt></a> is called.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="riak.riak_object.RiakObject.key">
<tt class="descname">key</tt><a class="headerlink" href="#riak.riak_object.RiakObject.key" title="Permalink to this definition">¶</a></dt>
<dd><p>The key of this object, a string. If not present, the server
will generate a key the first time this object is stored.</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.bucket">
<tt class="descname">bucket</tt><a class="headerlink" href="#riak.riak_object.RiakObject.bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="bucket.html#riak.bucket.RiakBucket" title="riak.bucket.RiakBucket"><tt class="xref py py-class docutils literal"><span class="pre">bucket</span></tt></a> to which this
object belongs.</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.resolver">
<tt class="descname">resolver</tt><a class="headerlink" href="#riak.riak_object.RiakObject.resolver" title="Permalink to this definition">¶</a></dt>
<dd><p>The sibling-resolution function for this
object. If the resolver is not set, the
bucket&#8217;s resolver will be used.</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.vclock">
<tt class="descname">vclock</tt><a class="headerlink" href="#riak.riak_object.RiakObject.vclock" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#vclock"><em>Vector clock</em></a> for this object.</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.exists">
<tt class="descname">exists</tt><a class="headerlink" href="#riak.riak_object.RiakObject.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the object exists. This is only <tt class="docutils literal"><span class="pre">False</span></tt> when there
are no siblings (the object was not found), or the solitary
sibling is a tombstone.</p>
</dd></dl>

</dd></dl>

<div class="section" id="vector-clock">
<span id="vclock"></span><h3>Vector clock<a class="headerlink" href="#vector-clock" title="Permalink to this headline">¶</a></h3>
<p>Vector clocks are Riak&#8217;s means of tracking the relationships between
writes to a key. It is best practice to fetch the latest version of a
key before attempting to modify or overwrite the value; if you do not,
you may create <a class="reference internal" href="#siblings"><em>Siblings</em></a> or lose data! The content of a vector
clock is essentially opaque to the user.</p>
<dl class="class">
<dt id="riak.riak_object.VClock">
<em class="property">class </em><tt class="descclassname">riak.riak_object.</tt><tt class="descname">VClock</tt><big>(</big><em>value</em>, <em>encoding</em><big>)</big><a class="headerlink" href="#riak.riak_object.VClock" title="Permalink to this definition">¶</a></dt>
<dd><p>A representation of a vector clock received from Riak.</p>
</dd></dl>

</div>
</div>
<div class="section" id="persistence">
<h2>Persistence<a class="headerlink" href="#persistence" title="Permalink to this headline">¶</a></h2>
<p>Fetching, storing, and deleting keys are the bread-and-butter of Riak.</p>
<dl class="method">
<dt id="riak.riak_object.RiakObject.store">
<tt class="descclassname">RiakObject.</tt><tt class="descname">store</tt><big>(</big><em>w=None</em>, <em>dw=None</em>, <em>pw=None</em>, <em>return_body=True</em>, <em>if_none_match=False</em>, <em>timeout=None</em><big>)</big><a class="headerlink" href="#riak.riak_object.RiakObject.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Store the object in Riak. When this operation completes, the
object could contain new metadata and possibly new data if Riak
contains a newer version of the object according to the object&#8217;s
vector clock.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>w</strong> (<em>integer</em>) &#8211; W-value, wait for this many partitions to respond
before returning to client.</li>
<li><strong>dw</strong> (<em>integer</em>) &#8211; DW-value, wait for this many partitions to
confirm the write before returning to client.</li>
<li><strong>pw</strong> (<em>integer</em>) &#8211; PW-value, require this many primary partitions to
be available before performing the put</li>
<li><strong>return_body</strong> (<em>bool</em>) &#8211; if the newly stored object should be
retrieved</li>
<li><strong>if_none_match</strong> (<em>bool</em>) &#8211; Should the object be stored only if
there is no key previously defined</li>
<li><strong>timeout</strong> (<em>int</em>) &#8211; a timeout value in milliseconds</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="riak.riak_object.RiakObject.reload">
<tt class="descclassname">RiakObject.</tt><tt class="descname">reload</tt><big>(</big><em>r=None</em>, <em>pr=None</em>, <em>timeout=None</em><big>)</big><a class="headerlink" href="#riak.riak_object.RiakObject.reload" title="Permalink to this definition">¶</a></dt>
<dd><p>Reload the object from Riak. When this operation completes, the
object could contain new metadata and a new value, if the object
was updated in Riak since it was last retrieved.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even if the key is not found in Riak, this will
return a <a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a>. Check the <a class="reference internal" href="#riak.riak_object.RiakObject.exists" title="riak.riak_object.RiakObject.exists"><tt class="xref py py-attr docutils literal"><span class="pre">exists</span></tt></a>
property to see if the key was found.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>r</strong> (<em>integer</em>) &#8211; R-Value, wait for this many partitions to respond
before returning to client.</li>
<li><strong>pr</strong> (<em>integer</em>) &#8211; PR-value, require this many primary partitions to
be available before performing the read that
precedes the put</li>
<li><strong>timeout</strong> (<em>int</em>) &#8211; a timeout value in milliseconds</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="riak.riak_object.RiakObject.delete">
<tt class="descclassname">RiakObject.</tt><tt class="descname">delete</tt><big>(</big><em>rw=None</em>, <em>r=None</em>, <em>w=None</em>, <em>dw=None</em>, <em>pr=None</em>, <em>pw=None</em>, <em>timeout=None</em><big>)</big><a class="headerlink" href="#riak.riak_object.RiakObject.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete this object from Riak.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rw</strong> (<em>integer</em>) &#8211; RW-value. Wait until this many partitions have
deleted the object before responding. (deprecated in Riak
1.0+, use R/W/DW)</li>
<li><strong>r</strong> (<em>integer</em>) &#8211; R-value, wait for this many partitions to read object
before performing the put</li>
<li><strong>w</strong> (<em>integer</em>) &#8211; W-value, wait for this many partitions to respond
before returning to client.</li>
<li><strong>dw</strong> (<em>integer</em>) &#8211; DW-value, wait for this many partitions to
confirm the write before returning to client.</li>
<li><strong>pr</strong> (<em>integer</em>) &#8211; PR-value, require this many primary partitions to
be available before performing the read that
precedes the put</li>
<li><strong>pw</strong> (<em>integer</em>) &#8211; PW-value, require this many primary partitions to
be available before performing the put</li>
<li><strong>timeout</strong> (<em>int</em>) &#8211; a timeout value in milliseconds</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="value-and-metadata">
<span id="object-accessors"></span><h2>Value and Metadata<a class="headerlink" href="#value-and-metadata" title="Permalink to this headline">¶</a></h2>
<p>Unless you have enabled <a class="reference internal" href="#siblings"><em>Siblings</em></a> via the <a class="reference internal" href="bucket.html#riak.bucket.RiakBucket.allow_mult" title="riak.bucket.RiakBucket.allow_mult"><tt class="xref py py-attr docutils literal"><span class="pre">allow_mult</span></tt></a> bucket property, you can
inspect and manipulate the value and metadata of an object directly using these
properties and methods:</p>
<dl class="attribute">
<dt id="riak.riak_object.RiakObject.data">
<tt class="descclassname">RiakObject.</tt><tt class="descname">data</tt><a class="headerlink" href="#riak.riak_object.RiakObject.data" title="Permalink to this definition">¶</a></dt>
<dd><p>The data stored in this object, as Python objects. For the raw
data, use the <cite>encoded_data</cite> property. If unset, accessing
this property will result in decoding the <cite>encoded_data</cite>
property into Python values. The decoding is dependent on the
<cite>content_type</cite> property and the bucket&#8217;s registered decoders.</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.encoded_data">
<tt class="descclassname">RiakObject.</tt><tt class="descname">encoded_data</tt><a class="headerlink" href="#riak.riak_object.RiakObject.encoded_data" title="Permalink to this definition">¶</a></dt>
<dd><p>The raw data stored in this object, essentially the encoded
form of the <cite>data</cite> property. If unset, accessing this property
will result in encoding the <cite>data</cite> property into a string. The
encoding is dependent on the <cite>content_type</cite> property and the
bucket&#8217;s registered encoders.</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.content_type">
<tt class="descclassname">RiakObject.</tt><tt class="descname">content_type</tt><a class="headerlink" href="#riak.riak_object.RiakObject.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The MIME media type of the encoded data as a string</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.charset">
<tt class="descclassname">RiakObject.</tt><tt class="descname">charset</tt><a class="headerlink" href="#riak.riak_object.RiakObject.charset" title="Permalink to this definition">¶</a></dt>
<dd><p>The character set of the encoded data as a string</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.content_encoding">
<tt class="descclassname">RiakObject.</tt><tt class="descname">content_encoding</tt><a class="headerlink" href="#riak.riak_object.RiakObject.content_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>The encoding (compression) of the encoded data. Valid values
are identity, deflate, gzip</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.last_modified">
<tt class="descclassname">RiakObject.</tt><tt class="descname">last_modified</tt><a class="headerlink" href="#riak.riak_object.RiakObject.last_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>The UNIX timestamp of the modification time of this value.</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.etag">
<tt class="descclassname">RiakObject.</tt><tt class="descname">etag</tt><a class="headerlink" href="#riak.riak_object.RiakObject.etag" title="Permalink to this definition">¶</a></dt>
<dd><p>A unique entity-tag for the value.</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.usermeta">
<tt class="descclassname">RiakObject.</tt><tt class="descname">usermeta</tt><a class="headerlink" href="#riak.riak_object.RiakObject.usermeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Arbitrary user-defined metadata dict, mapping strings to strings.</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.links">
<tt class="descclassname">RiakObject.</tt><tt class="descname">links</tt><a class="headerlink" href="#riak.riak_object.RiakObject.links" title="Permalink to this definition">¶</a></dt>
<dd><p>A set of bucket/key/tag 3-tuples representing links to other
keys.</p>
</dd></dl>

<dl class="attribute">
<dt id="riak.riak_object.RiakObject.indexes">
<tt class="descclassname">RiakObject.</tt><tt class="descname">indexes</tt><a class="headerlink" href="#riak.riak_object.RiakObject.indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of secondary index entries, consisting of
index-name/value tuples</p>
</dd></dl>

<dl class="method">
<dt id="riak.riak_object.RiakObject.add_index">
<tt class="descclassname">RiakObject.</tt><tt class="descname">add_index</tt><big>(</big><em>field</em>, <em>value</em><big>)</big><a class="headerlink" href="#riak.riak_object.RiakObject.add_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Tag this object with the specified field/value pair for
indexing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>field</strong> (<em>string</em>) &#8211; The index field.</li>
<li><strong>value</strong> (<em>string or integer</em>) &#8211; The index value.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="riak.riak_object.RiakObject.remove_index">
<tt class="descclassname">RiakObject.</tt><tt class="descname">remove_index</tt><big>(</big><em>field=None</em>, <em>value=None</em><big>)</big><a class="headerlink" href="#riak.riak_object.RiakObject.remove_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the specified field/value pair as an index on this
object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>field</strong> (<em>string</em>) &#8211; The index field.</li>
<li><strong>value</strong> (<em>string or integer</em>) &#8211; The index value.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="riak.riak_object.RiakObject.set_index">
<tt class="descclassname">RiakObject.</tt><tt class="descname">set_index</tt><big>(</big><em>field</em>, <em>value</em><big>)</big><a class="headerlink" href="#riak.riak_object.RiakObject.set_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like <a class="reference internal" href="#riak.riak_object.RiakObject.add_index" title="riak.riak_object.RiakObject.add_index"><tt class="xref py py-meth docutils literal"><span class="pre">add_index()</span></tt></a>, but ensures that there is only
one index on given field. If other found, then removes it
first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>field</strong> (<em>string</em>) &#8211; The index field.</li>
<li><strong>value</strong> (<em>string or integer</em>) &#8211; The index value.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="riak.riak_object.RiakObject.add_link">
<tt class="descclassname">RiakObject.</tt><tt class="descname">add_link</tt><big>(</big><em>obj</em>, <em>tag=None</em><big>)</big><a class="headerlink" href="#riak.riak_object.RiakObject.add_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a link to a RiakObject.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obj</strong> (<em>mixed</em>) &#8211; Either a RiakObject or 3 item link tuple consisting
of (bucket, key, tag).</li>
<li><strong>tag</strong> (<em>string</em>) &#8211; Optional link tag. Defaults to bucket name. It is ignored
if <tt class="docutils literal"><span class="pre">obj</span></tt> is a 3 item link tuple.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="siblings">
<span id="id1"></span><h2>Siblings<a class="headerlink" href="#siblings" title="Permalink to this headline">¶</a></h2>
<p>Because Riak&#8217;s consistency model is &#8220;eventual&#8221; (and not linearizable),
there is no way for it to disambiguate writes that happen
concurrently. The <a class="reference internal" href="#vclock"><em>Vector clock</em></a> helps establish a
&#8220;happens after&#8221; relationships so that concurrent writes can be
detected, but with the exception of <a class="reference internal" href="bucket.html#counters"><em>Counters</em></a>, Riak has no way
to determine which write has the correct value.</p>
<p>Instead, when <a class="reference internal" href="bucket.html#riak.bucket.RiakBucket.allow_mult" title="riak.bucket.RiakBucket.allow_mult"><tt class="xref py py-attr docutils literal"><span class="pre">allow_mult</span></tt></a>
is <tt class="docutils literal"><span class="pre">True</span></tt>, Riak keeps all writes that appear to be concurrent. Thus,
the contents of a key&#8217;s value may, in fact, be multiple values, which
are called &#8220;siblings&#8221;. Siblings are modeled in <a class="reference internal" href="#riak.content.RiakContent" title="riak.content.RiakContent"><tt class="xref py py-class docutils literal"><span class="pre">RiakContent</span></tt></a> objects, which contain all of the same
<a class="reference internal" href="#object-accessors"><em>Value and Metadata</em></a> methods and attributes as the parent object.</p>
<dl class="attribute">
<dt id="riak.riak_object.RiakObject.siblings">
<tt class="descclassname">RiakObject.</tt><tt class="descname">siblings</tt><em class="property"> = []</em><a class="headerlink" href="#riak.riak_object.RiakObject.siblings" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of sibling values contained in this object</p>
</dd></dl>

<dl class="class">
<dt id="riak.content.RiakContent">
<em class="property">class </em><tt class="descclassname">riak.content.</tt><tt class="descname">RiakContent</tt><big>(</big><em>robject</em>, <em>data=None</em>, <em>encoded_data=None</em>, <em>charset=None</em>, <em>content_type='application/json'</em>, <em>content_encoding=None</em>, <em>last_modified=None</em>, <em>etag=None</em>, <em>usermeta=None</em>, <em>links=None</em>, <em>indexes=None</em>, <em>exists=False</em><big>)</big><a class="headerlink" href="#riak.content.RiakContent" title="Permalink to this definition">¶</a></dt>
<dd><p>The RiakContent holds the metadata and value of a single sibling
within a RiakObject. RiakObjects that have more than one sibling
are considered to be in conflict.</p>
</dd></dl>

<p>You do not typically have to create <a class="reference internal" href="#riak.content.RiakContent" title="riak.content.RiakContent"><tt class="xref py py-class docutils literal"><span class="pre">RiakContent</span></tt></a> objects yourself, but they will be created
for you when <a class="reference internal" href="#riak.riak_object.RiakObject.reload" title="riak.riak_object.RiakObject.reload"><tt class="xref py py-meth docutils literal"><span class="pre">fetching</span></tt></a> objects from Riak.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="#object-accessors"><em>Value and Metadata</em></a> accessors on <a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a>
are actually proxied to the first sibling when the object has only
one.</p>
</div>
<div class="section" id="conflicts-and-resolvers">
<h3>Conflicts and Resolvers<a class="headerlink" href="#conflicts-and-resolvers" title="Permalink to this headline">¶</a></h3>
<p>When an object is <em>not</em> in conflict, it has only one sibling. When it
is in conflict, you will have to resolve the conflict before it can be
written again. How you choose to resolve the conflict is up to you,
but you can automate the process using a <a class="reference internal" href="#riak.riak_object.RiakObject.resolver" title="riak.riak_object.RiakObject.resolver"><tt class="xref py py-attr docutils literal"><span class="pre">resolver</span></tt></a> function.</p>
<dl class="function">
<dt id="riak.resolver.default_resolver">
<tt class="descclassname">riak.resolver.</tt><tt class="descname">default_resolver</tt><big>(</big><em>riak_object</em><big>)</big><a class="headerlink" href="#riak.resolver.default_resolver" title="Permalink to this definition">¶</a></dt>
<dd><p>The default conflict-resolution function, which does nothing. To
implement a resolver, define a function that sets the
<a class="reference internal" href="#riak.riak_object.RiakObject.siblings" title="riak.riak_object.RiakObject.siblings"><tt class="xref py py-attr docutils literal"><span class="pre">siblings</span></tt></a> property
on the passed <a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a>
instance to a list containing a single <a class="reference internal" href="#riak.content.RiakContent" title="riak.content.RiakContent"><tt class="xref py py-class docutils literal"><span class="pre">RiakContent</span></tt></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>riak_object</strong> (<a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a>) &#8211; an object-in-conflict that will be resolved</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="riak.resolver.last_written_resolver">
<tt class="descclassname">riak.resolver.</tt><tt class="descname">last_written_resolver</tt><big>(</big><em>riak_object</em><big>)</big><a class="headerlink" href="#riak.resolver.last_written_resolver" title="Permalink to this definition">¶</a></dt>
<dd><p>A conflict-resolution function that resolves by selecting the most
recently-modified sibling by timestamp.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>riak_object</strong> (<a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a>) &#8211; an object-in-conflict that will be resolved</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>If you do not supply a resolver function, or your resolver leaves
multiple siblings present, accessing the <a class="reference internal" href="#object-accessors"><em>Value and Metadata</em></a> will
result in a <a class="reference internal" href="#riak.ConflictError" title="riak.ConflictError"><tt class="xref py py-exc docutils literal"><span class="pre">ConflictError</span></tt></a> being raised.</p>
<dl class="exception">
<dt id="riak.ConflictError">
<em class="property">exception </em><tt class="descclassname">riak.</tt><tt class="descname">ConflictError</tt><big>(</big><em>message='Object in conflict'</em><big>)</big><a class="headerlink" href="#riak.ConflictError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when an operation is attempted on a
<a class="reference internal" href="#riak.riak_object.RiakObject" title="riak.riak_object.RiakObject"><tt class="xref py py-class docutils literal"><span class="pre">RiakObject</span></tt></a> that has more than one
sibling.</p>
</dd></dl>

</div>
</div>
</div>


  <div class="clearfix">&nbsp;</div>
  <ul class="pager">
    <li class="previous">
      <a href="bucket.html" 
         title="previous chapter">&larr;Buckets</a></li>
    <li class="next">
      <a href="query.html" 
         title="next chapter">Query Methods&rarr;</a></li>
  </ul>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
  <a href="_sources/object.txt"
     rel="nofollow">Source</a>
      
    </p>
    <p>
        &copy; Copyright 2010-2013, Basho Technologies.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>